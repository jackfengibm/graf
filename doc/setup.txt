###
# Setup Script
###
rails new graf
cd graf
git add .
git commit -a -m "Initial Add"
git remote add gerrit ssh://jason.anderson@gerrit.w3.bluemix.net:29418/graf
git push gerrit master:refs/heads/master

rails g scaffold Repo git_id:integer name:string full_name:string fork:boolean date_created:date date_updated:date date_pushed:date
rails g scaffold PullRequest repo:references user:references git_id:integer pr_number:integer body:text title:string state:string date_created:date date_closed:date date_updated:date date_merged:date
rails g scaffold User company:references git_id:integer login:string name:string location:string email:string date_created:date date_updated:date
rails g scaffold Company name:string source:string
rails g scaffold GithubLoad  load_start_time:datetime load_complete_time:datetime initial_load:boolean
rails g scaffold GithubLoadMsg github_load:references msg:string log_level:integer log_date:datetime


###
# Tips
###
Get delta github data: https://coderwall.com/p/hu2n4g

How to delete all database data: rake db:schema:load


###
# MYSQL
###
Get all users in the DB:
SELECT User, Host, Password FROM mysql.user;

CREATE DATABASE graf_db CHARACTER SET utf8 COLLATE utf8_general_ci;
GRANT ALL PRIVILEGES ON graf_db.* TO 'graf_user'@'localhost' IDENTIFIED BY 'time4fun';



###
# Deploying to BlueMix
###
cf push --command 'bundle exec rake db:create db:migrate' graf
cf push --command 'bundle exec rails s'

{
   "mysql-5.5": [
      {
         "name": "graf-db",
         "credentials": {
            "name": "d6e8e1188b2124bc7b67fdefa63b8c980",
            "hostname": "10.0.116.62",
            "host": "10.0.116.62",
            "port": 3307,
            "user": "uJ4LJCgf7xsGT",
            "username": "uJ4LJCgf7xsGT",
            "password": "pZDbbwCIZUacr",
            "uri": "mysql://uJ4LJCgf7xsGT:pZDbbwCIZUacr@10.0.116.62:3307/d6e8e1188b2124bc7b67fdefa63b8c980"
         }
      }
   ]
}

# Prod DB
mysql -h 10.0.116.62 -u uJ4LJCgf7xsGT -P 3307 d6e8e1188b2124bc7b67fdefa63b8c980 -p pZDbbwCIZUacr

# Test DB
mysql -h 10.0.116.62 -P 3307 -u uYl77NvVqpQQR df1b37c18545c47a3b1be0abef97b1de5 -p



