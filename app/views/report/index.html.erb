<%################%>
<%# Extra Headers %>
<%################%>
<% content_for(:extra_headers) do %>
  <script type="text/javascript">
    $(function() {
      $( document ).tooltip();
    });

    //
    // Initial Page Load Activities
    //
    $(document).ready(function () {
      // Run the filter update on load to get the data
      filterUpdate();
    });


    function filterUpdate() {
      data = {
        report: 'prs',
        searchCriteria: createSearchCriteriaJSON()
        // Add summary
      }
      // Make API calls to update the data
      reportAJAX(data, 'text', updateTableCallback);
      data = {
        report: 'summary',
        searchCriteria: createSearchCriteriaJSON()
        // Add summary
      }
      // Make API calls to update the data
      reportAJAX(data, 'text', updateSummaryTableCallback);
    }

    function updateTableCallback(result){
      //alert(result)
      $("#table_container").empty();
      $("#table_container").html(result);
      $("#report_table").dataTable(REPORT_TABLE_OPTIONS);
    }
    function updateSummaryTableCallback(result){
      $("#table_summary_container").empty();
      $("#table_summary_container").html(result);
      $("#summary_report_table").dataTable(MIN_TABLE_OPTIONS);
      
      // Couldn't get working with regular tables, uncomment below to see example 
      //$("#summary_report_table").empty();
      //$("#summary_report_table").html(result);
    }
  </script>
<% end %>


<%###############%>
<%# Body Section %>
<%###############%>

<br><br>

<%= render 'shared/search_criteria' %>
<br>
<br>
<b>Pull Request Summary for IBMers</b>
<br>
<br>
<div id="table_summary_container" style="width:350px; height:50px; "></div>

</div>

<br>
<hr>
<br>

<div>
<b>Pull Request Details for IBMers</b>
<br>
<br>

<div id="table_container"></div>

</div>
